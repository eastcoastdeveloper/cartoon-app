<div [ngClass]="{ 'home-page-editing-mode': mode === 'edit' }" id="home-page">
  <div *ngIf="loggedIn" class="notification margin-auto">Logged In.</div>
  <div *ngIf="!loggedIn" class="validation-error margin-auto">Logged Out.</div>
  <div
    [ngClass]="{ 'cartoon-layout-default': mode === 'create' }"
    class="cartoon"
  >
    <div
      *ngIf="windowWidth! > 768 && mode === 'create'"
      (click)="navigatePrevious()"
      class="arrow-left"
    >
      <div>
        <span>&#11013;</span>
      </div>
    </div>
    <div class="main-image element-shadow">
      <img [src]="currentImage" [alt]="altText" />
    </div>
    <div
      *ngIf="windowWidth! > 768 && mode === 'create'"
      (click)="navigateNext()"
      class="arrow-right"
    >
      <div>
        <span>&#11157;</span>
      </div>
    </div>
    <div *ngIf="windowWidth! < 769 && mode === 'create'" class="arrow-buttons">
      <button type="button" (click)="navigatePrevious()">Previous</button>
      <button type="button" (click)="navigateNext()">Next</button>
    </div>
  </div>

  <div class="user-input" [ngClass]="{ 'form-spacing': mode === 'edit' }">
    <!-- <div class="caption-details">
      <div class="votes">
        <span id="vote-down"></span>
        <span class="total-votes"></span>
        <span id="vote-up"></span>
      </div>
    </div> -->

    <form [formGroup]="reactiveForm" #form="ngForm">
      <div>
        <label [ngClass]="{ inactive: !userIsAuthenticated }" for="caption">{{
          mode === "create" ? "Caption" : "Revised Caption"
        }}</label>
        <input
          type="text"
          tabindex="1"
          id="caption"
          name="caption"
          formControlName="caption"
          [ngModel]="captionBeingEdited"
          placeholder="Please submit your caption"
          required
          minlength="1"
          maxlength="250"
          class="form-control form-control-sm"
          [class.is-invalid]="
            caption.invalid && (caption.dirty || caption.touched)
          "
        />
        <div
          *ngIf="caption.invalid && (caption.dirty || caption.touched)"
          class="invalid-feedback"
        >
          <!-- <div *ngIf="caption.errors?.['required']" class="validation-error">
            This field is required.
          </div> -->
          <div *ngIf="caption.errors?.['minlength']" class="validation-error">
            This field must have at least 1 character.
          </div>
          <div *ngIf="caption.errors?.['maxlength']" class="validation-error">
            This field must have at most 250 characters.
          </div>
        </div>
      </div>
      <!-- <div *ngIf="mode === 'create'" class="first-last">
        <div>
          <label [ngClass]="{ inactive: !userIsAuthenticated }" for="name"
            >First Name</label
          >
          <input
            type="text"
            tabindex="2"
            id="firstname"
            name="firstname"
            formControlName="firstname"
            placeholder="First name"
            required
            minlength="1"
            maxlength="250"
            class="form-control form-control-sm"
            [class.is-invalid]="
              firstname.invalid && (firstname.dirty || firstname.touched)
            "
          />
          <div
            *ngIf="firstname.invalid && (firstname.dirty || firstname.touched)"
            class="invalid-feedback"
          >
            <div
              *ngIf="firstname.errors?.['required']"
              class="validation-error"
            >
              This field is required.
            </div>
            <div
              *ngIf="firstname.errors?.['minlength']"
              class="validation-error"
            >
              This field must have at least 1 character.
            </div>
            <div
              *ngIf="firstname.errors?.['maxlength']"
              class="validation-error"
            >
              This field must have at most 250 characters.
            </div>
          </div>
        </div>

        <div>
          <label [ngClass]="{ inactive: !userIsAuthenticated }" for="name"
            >Last Name</label
          >
          <input
            type="text"
            tabindex="3"
            id="lastname"
            name="lastname"
            formControlName="lastname"
            placeholder="Last name"
            minlength="1"
            maxlength="250"
            class="form-control form-control-sm"
          />
          <div
            *ngIf="lastname.invalid && (lastname.dirty || lastname.touched)"
            class="invalid-feedback"
          >
            <div *ngIf="lastname.errors?.['required']" class="validation-error">
              This field is required.
            </div>
            <div
              *ngIf="lastname.errors?.['minlength']"
              class="validation-error"
            >
              This field must have at least 1 character.
            </div>
            <div
              *ngIf="lastname.errors?.['maxlength']"
              class="validation-error"
            >
              This field must have at most 250 characters.
            </div>
          </div>
        </div>
      </div> -->

      <div *ngIf="mode === 'create'" class="submit">
        <!-- <div *ngIf="mode === 'create'">
          <label [ngClass]="{ inactive: !userIsAuthenticated }" for="city"
            >City</label
          >
          <input
            type="text"
            tabindex="4"
            id="city"
            name="city"
            formControlName="city"
            placeholder="City"
            minlength="1"
            maxlength="250"
            class="form-control form-control-sm"
          />
          <div
            *ngIf="city.invalid && (city.dirty || city.touched)"
            class="invalid-feedback"
          >
            <div *ngIf="city.errors?.['required']" class="validation-error">
              This field is required.
            </div>
            <div *ngIf="city.errors?.['minlength']" class="validation-error">
              This field must have at least 1 character.
            </div>
            <div *ngIf="city.errors?.['maxlength']" class="validation-error">
              This field must have at most 250 characters.
            </div>
          </div>
        </div> -->

        <!-- <div>
          <label [ngClass]="{ inactive: !userIsAuthenticated }" for="state"
            >State/ Province</label
          >
          <input
            type="text"
            tabindex="5"
            id="state"
            name="state"
            formControlName="state"
            placeholder="State/ Province"
            minlength="1"
            maxlength="250"
            class="form-control form-control-sm"
          />
          <div
            *ngIf="state.invalid && (state.dirty || state.touched)"
            class="invalid-feedback"
          >
            <div *ngIf="state.errors?.['required']" class="validation-error">
              This field is required.
            </div>
            <div *ngIf="state.errors?.['minlength']" class="validation-error">
              This field must have at least 1 character.
            </div>
            <div *ngIf="state.errors?.['maxlength']" class="validation-error">
              This field must have at most 250 characters.
            </div>
          </div>
        </div> -->

        <!-- User Submit Button -->
        <div
          class="submit-caption"
          (mouseover)="hover = true"
          (mouseleave)="hover = false"
        >
          <button
            type="submit"
            [ngClass]="{ 'button-disabled': !userIsAuthenticated }"
            tabindex="6"
            (click)="validate()"
            [disabled]="!userIsAuthenticated"
          >
            Submit
          </button>
        </div>
      </div>

      <!-- Update Caption Button -->
      <div
        *ngIf="mode === 'edit'"
        class="edit-caption"
        (mouseover)="hover = true"
        (mouseleave)="hover = false"
      >
        <br />
        <button
          type="submit"
          [ngClass]="{ 'button-disabled': !userIsAuthenticated }"
          tabindex="6"
          (click)="updateCaption()"
          [disabled]="!userIsAuthenticated"
        >
          Update Caption
        </button>
      </div>
    </form>
  </div>

  <div *ngIf="mode === 'create'" class="total-comments">
    {{ totalCaptions + " captions" }}
  </div>

  <div *ngIf="mode === 'create'" class="published-content">
    <div
      *ngFor="let data of captionsArray; let i = index"
      class="repeating-block element-shadow"
    >
      <div class="submission">
        <span class="nickname">{{ data.username }}</span>
        <p>{{ data.caption }}</p>
        <!-- <div class="full-name">
          <span>{{ data.firstName }}</span>
          <span *ngIf="data.lastName != ''">{{ data.lastName }}</span>
        </div>
        <div
          [ngClass]="{
            marginZero:
              data.city === '' && data.state === '' && data.country === ''
          }"
          class="location"
        >
          <span *ngIf="data.city != ''">{{ data.city }}</span>
          <span *ngIf="data.state != ''">{{ data.state }}</span>
          <span *ngIf="data.country != ''">{{ data.country }}</span>
        </div> -->
      </div>
      <div class="votes">
        <!-- <div (click)="voteUp(data.votes!)" class="vote-up">
          <span>&#43;</span>
        </div>
        <div class="vote-total">
          <span class="vote-total">{{ data.votes }}</span>
        </div>
        <div (click)="voteDown(data.votes!)" class="vote-down">
          <span class="vote-total">&#45;</span>
        </div> -->
      </div>
    </div>
    <!-- <div class="load-more-captions">
      <button type="button" (click)="loadMoreCaptions()">Load More</button>
    </div> -->
  </div>
</div>
